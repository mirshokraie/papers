\begin{figure}
%\medskip
\begin{lstlisting}
	var customer = {Id:"", couponStatus:"readyToUse", shopCart:"", ...};
	var coupon = {Id:"", ...}
	...
	$document.ready(function() {
		...
		$('#couponButt').click(selectCoupon);
	});
	
	function calculatePrice(customer, coupon) {
		coupElem = $('#couponButt');
		var price= $('#merchPrice').text();
		coupon.Id = couponFromServer(url + customer.Id);
		if(customer.couponStatus != 'used'){
			coupElem.removeClass(customer.couponStatus);
			customer.couponStatus = coupon.Id + '-' + 'used';
			discountVal = calcDiscount(coupElem.data('value'), customer.Id, coupon.Id);
			price -= discountVal;	
			coupElem.addClass(customer.couponStatus);
		} 	
		customer.shopCart = price;
		$('#calcPrice').text(price);  
	}
	
	function selectCoupon(){
		...
		customer.Id = customerFromServer($('#user').val());
		calculatePrice(customer, coupon);
	}

\end{lstlisting}
\vspace{-0.1in} 

\caption{\javascript code of the running example.}
\label{Fig:example}
\vspace{-0.2in} 

\end{figure}