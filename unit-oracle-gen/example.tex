\begin{figure}
%\medskip
\begin{lstlisting}
	var customer = {Id:"", couponStatus:"default", shopCart:0, ...};
	var coupon = {Id:"", ...}
	...
	$document.ready(function() {
		...
		$('#couponButt').click(selectCoupon);
		$('#viewCart').click(viewCart);
	});
	
	function calculatePrice(customer, coupon) {
		var coupElem = $('#couponButt');
		var price= getPrice($('.merchandise'));
		coupon.Id = couponFromServer(url + customer.Id);
		if(coupElem.attr('class') != coupon.Id + '-' + 'used'){
			coupElem.removeClass(customer.couponStatus);
			customer.couponStatus = coupon.Id + '-' + 'used';
			discountVal = calcDiscount(coupElem.data('value'), customer.Id);
			price -= discountVal;	
			coupElem.addClass(customer.couponStatus);
		} 	
		$('#calcPrice').text(price);
		customer.shopCart += price;
	}
	
	function selectCoupon(){
		...
		customer.Id = customerFromServer($('#user').val());
		calculatePrice(customer, coupon);
	}

	function viewCart(){
		...
		if(customer.shopCart==0 && customer.couponStatus == 'default')
			alert('Shopping cart is empty');
		else
			$("#cart").append('Total purchases: ' + customer.shopCart);
	}


\end{lstlisting}
\vspace{-0.1in} 

\caption{\javascript code of the running example.}
\label{Fig:example}
\vspace{-0.2in} 

\end{figure}