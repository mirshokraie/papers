\chapter{Inferring Unit Oracles from GUI Test Cases} \label{Chap:atrina}
%\javascript is extensively used in today's modern web applications. The close relation between the Document Object Model (DOM) and the underlying \javascript code creates an interactive web application. To check the application's behaviour from an end-user's perspective, testers often use popular frameworks such as Selenium. Using these frameworks to write DOM-based tests and assertions
%requires little knowledge about the internal operations performed at the client side code. Rather, the tester needs only basic knowledge of common event sequences to cover important DOM elements to assert. 
%This makes it easier for
%the tester to write DOM-based test suites. On the other hand,
%writing unit test assertions at code-level for web applications that have rich interaction with the DOM through their \javascript code is more tedious. 
%To write unit-level assertions, the tester needs to precisely understand the full range of interaction between the code level operations of a unit and the DOM level operations of a system, and thus may fail to assert the correctness of a particular behaviour when the unit is used as a part of a system. 
%
%Our previous findings \cite{mirshokraie:icst15} indicate that DOM-based assertions can potentially miss the related portion of
%code-level failure, while more fine grained unit-level assertions are capable of detecting such faults. Furthermore, finding the root cause of an error during DOM-based testing can be more expensive than during unit testing.
%The inherent characteristics of unit and DOM-based tests, indicate that they are complementary and that there is a trade-off in individually using each to detect faults. 
%
%Current test generation approaches either produce unit test oracles based on mutation testing techniques \cite{mirshokraie:icst15, fraser:tse12}, or they rely on soft oracles \cite{artzi:icse11}. Mutation-based approaches suffer from high computational cost and equivalent mutants which are syntactically different but semantically are the same as the original application.
%Soft oracles such as HTML validation and runtime exceptions are also limited in that they fail to capture logical and computational errors. 
%Recently, Milani Fard \etal \cite{milanifard:ase14} proposed using the DOM-based test suite of a web application to regenerate assertions for newly detected states through exploring alternative paths of the application. However, the new assertions generated by this technique remain at the DOM-level without considering the relation between the \javascript code and the DOM.
In response to our first research question (RQ 1.3.A), we propose to exploit an existing DOM-based test suite to generate unit-level assertions at the code-level for applications that highly interact with the DOM through the underlying \javascript code. We utilize
existing DOM-dependent assertions as well as useful execution information inferred from a DOM-based test suite to automatically generate assertions used for testing individual \javascript functions.

%To the best of our knowledge this work is the first to propose an approach for generating unit-level assertions by using the existing DOM-based test suite of the application. The main contributions of our work include:
%\begin{itemize}[noitemsep]
%\item A slicing-based technique to generate unit-level assertions capable of testing \javascript functions by utilizing existing DOM-based test assertions;
%\item A technique for selecting effective DOM elements in detecting code-level faults, which remain unchecked in the existing DOM-based test suite;
%\item An implementation of our approach in a tool, called \atrina; 
%\item An empirical evaluation to assess the efficacy of the approach on four open-source web applications;
Our approach is implemented in a tool, called \atrina.
The evaluation results show that the assertions generated by \atrina surpass the fault finding capability of (1) the human-written DOM-based assertions by 37\% on average, and (2) the state-of-the-art mutation-based assertion generation technique by 29\% on average.
%\end{itemize} 
\input{motivation}
\input{approach}
\input{tool}
\input{evaluation}
%\input{atrina/related}
\input{concs}
